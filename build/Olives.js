define("Olives/DomUtils",function(){return{getNodes:function(b,g){return b instanceof HTMLElement?(b.parentNode||document.createDocumentFragment().appendChild(b),b.parentNode.querySelectorAll(g||"*")):false},loopNodes:function(b,g,e){var f=0,i;if(b instanceof NodeList&&g instanceof Function){for(i=b.length;f<i;f++)g.call(e,b[f]);return true}else return false}}});
define("Olives/Event-plugin",function(){return function(b){this.listen=function(g,e,f){g.addEventListener(e,function(e){b[f].call(b,e,g)},true)}}});define("Olives/List",["Olives/OObject","Olives/Model-plugin"],function(b,g){function e(){this.template="<ul data-model='toList'><li data-model='toText'></li></ul>";this.plugins.add("model",new g(this.model))}return function(f){e.prototype=new b(f);return new e}});
define("Olives/Model-plugin",["Store","Observable","Tools","Olives/DomUtils"],function(b,g,e,f){return function(g){var a=null;this.setModel=function(c){return c instanceof b?(a=c,true):false};this.getModel=function(){return a};this.ItemRenderer=function(a){var d=null;this.set=function(h){d=h;return true};this.get=function(){return d};this.associate=function(h,a){var c=d.cloneNode(true),b=f.getNodes(c);f.loopNodes(b,function(d){d.dataset[a+"_id"]=h});return c};this.set(a)};this.toList=function(c){var d,
h=new this.ItemRenderer(c.childNodes[0]);d=document.createDocumentFragment();a.loop(function(a,c){d.appendChild(this.plugins.apply(h.associate(c,this.plugins.name)))},this);c.replaceChild(d,c.childNodes[0]);a.watch("added",function(a){c.insertBefore(this.plugins.apply(h.associate(a,this.plugins.name)),c.childNodes[a])},this);a.watch("deleted",function(a){c.replaceChild(document.createTextNode(""),c.childNodes[a])})};this.toText=function(c,d){var d=d||"",h=c.dataset[this.plugins.name+"_id"],b=d.split("."),
f=h||b.shift(),g=h?d:b.join(".");if((h=e.getNestedProperty(a.get(f),g))||h===0)c.innerHTML=h;a.watchValue(f,function(a){c.innerHTML=e.getNestedProperty(a,g)})};this.set=function(c){return c instanceof HTMLElement&&c.name?(a.set(c.name,c.value),true):false};this.form=function d(d){if(d&&d.nodeName=="FORM"){var a=this;d.addEventListener("submit",function(b){f.loopNodes(d.querySelectorAll("[name]"),a.set,a);b.preventDefault()},true);return true}else return false};this.fromValue=function(d){return d&&
d instanceof HTMLElement?(this.set(d),d.addEventListener("change",function(){a.set(d.name,d.value)},true),true):false};this.setModel(g)}});
define("Olives/OObject",["StateMachine","Store","Olives/Plugins"],function(b,g,e){return function(f){var i=function(a){a=a.UI;if(a.template)a.dom=c,typeof a.template=="string"?a.dom.innerHTML=a.template:a.template instanceof HTMLElement&&a.dom.appendChild(a.template),a.plugins.apply(a.dom),a.onRender&&a.onRender();else throw Error("UI.template must be set prior to render");},a=function(a){var d=a.UI;a.params&&a.params.appendChild(d.dom);d.onPlace&&d.onPlace()},c=document.createElement("div"),d=new b("Init",
{Init:[["render",i,this,"Rendered"],["place",function(d){i(d);a(d)},this,"Rendered"]],Rendered:[["place",a,this],["render",i,this]]});this.model=f instanceof g?f:new g;this.plugins=new e;this.dom=this.template=null;this.onRender=function(){};this.action=function(a,c){d.event(a,{UI:this,params:c})};this.onPlace=function(){}}});
define("Olives/Plugins",["Tools","Olives/DomUtils"],function(b,g){return function(){var e={},f=function(a){return a.trim()},i=function(a,c,d){c.split(";").forEach(function(c){var b=c.split(":"),c=b[0].trim(),b=b[1]?b[1].split(",").map(f):[];b.unshift(a);e[d]&&e[d][c]&&e[d][c].apply(e[d],b)})};this.add=function(a,c){var d=this;return typeof a=="string"&&typeof c=="object"&&c?(e[a]=c,c.plugins={name:a,apply:function(){return d.apply.apply(d,arguments)}},true):false};this.get=function(a){return e[a]};
this.del=function(a){return delete e[a]};this.apply=function(a){var c;return a instanceof HTMLElement?(c=g.getNodes(a),b.loop(b.toArray(c),function(a){b.loop(a.dataset,function(c,b){i(a,c,b)})}),a):false}}});define("Olives/Text",["Olives/OObject","Olives/Model-plugin"],function(b,g){function e(b){this.template="<p data-model='toText:content'></p>";this.model.reset(b);this.plugins.add("model",new g(this.model))}return function(f){e.prototype=new b;return new e(f)}});
define("Olives/Type-plugin",["Olives/OObject","Tools"],function(b,g){return function(e){var f={};this.place=function(e,a){if(f[a]instanceof b)f[a].action("place",e);else throw Error(a+" is not an OObject UI in place:"+a);};this.set=function(e,a){return typeof e=="string"&&a instanceof b?(f[e]=a,true):false};this.setAll=function(b){g.loop(b,function(a,c){this.set(c,a)},this)};this.get=function(b){return f[b]};this.setAll(e)}});
