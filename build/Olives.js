define("Olives/DomUtils",function(){return{getNodes:function(b,h){return b instanceof HTMLElement?(b.parentNode||document.createDocumentFragment().appendChild(b),b.parentNode.querySelectorAll(h||"*")):false}}});define("Olives/List",["Olives/OObject","Olives/Model-plugin"],function(b,h){function d(d){this.template="<ul data-model='toList'><li data-model='toText'></li></ul>";this.model.reset(d);this.plugins.add("model",new h(this.model))}return function(f){d.prototype=new b;return new d(f)}});
define("Olives/Model-plugin",["Store","Observable","Tools"],function(b,h,d){return function(f){var e=null,g=new h,c=function(a,i){a.innerHTML=i};this.setModel=function(a){return a instanceof b?(e=a,e.watch("updated",function(a,d){g.notify(a,d)}),e.watch("added",function(a,d){g.notify(a,d)}),true):false};this.getModel=function(){return e};this.toList=function(a){var i=a.childNodes[0],g=document.createDocumentFragment(),c=this.getName();i&&(e.loop(function(a,e){var b=i.cloneNode(true);b.childNodes&&
d.loop(b.childNodes,function(a){a.dataset[c]&&(a.dataset[c+".id"]=e)});b.dataset[c]&&(b.dataset[c+".id"]=e);this.apply(b);g.appendChild(b)},this),a.replaceChild(g,i));e.watch("added",function(g){var b=i.cloneNode(true);b.childNodes&&d.loop(b.childNodes,function(a){a.dataset[c]&&(a.dataset[c+".id"]=g)});b.dataset[c]&&(b.dataset[c+".id"]=g);this.apply(b);a.insertBefore(b,a.childNodes[g])},this);e.watch("deleted",function(g){a.replaceChild(document.createTextNode(""),a.childNodes[g])})};this.toText=
function(a,b){var f=a.dataset[this.getName()+".id"];f?(e.has(f)&&(b?c(a,d.getObjectsProperty(e.get(f),b)):c(a,e.get(f))),g.watch(f,function(g){b&&(g=d.getObjectsProperty(e.get(f),b));a.innerHTML=g})):(e.has(b)&&c(a,e.get(b)),g.watch(b,function(b){a.innerHTML=b}))};this.setModel(f)}});
define("Olives/OObject",["StateMachine","Store","Olives/Plugins"],function(b,h,d){return function(){var f=function(a){a=a.UI;if(a.template)a.dom=g,typeof a.template=="string"?a.dom.innerHTML=a.template:a.template instanceof HTMLElement&&a.dom.appendChild(a.template),a.plugins.apply(a.dom),a.onRender&&a.onRender();else throw Error("UI.template must be set prior to render");},e=function(a){var b=a.UI;a.params&&a.params.appendChild(b.dom);b.onPlace&&b.onPlace()},g=document.createElement("div"),c=new b("Init",
{Init:[["render",f,this,"Rendered"],["place",function(a){f(a);e(a)},this,"Rendered"]],Rendered:[["place",e,this],["render",f,this]]});this.model=new h;this.plugins=new d;this.dom=this.template=null;this.onRender=function(){};this.action=function(a,b){c.event(a,{UI:this,params:b})};this.onPlace=function(){}}});
define("Olives/Plugins",["Tools","Olives/DomUtils"],function(b,h){return function(){var d={},f=function(b){return b.trim()},e=function(b,c,a){c.split(";").forEach(function(c){var e=c.split(":"),c=e[0].trim(),e=e[1]?e[1].split(",").map(f):[];e.unshift(b);d[a]&&d[a][c]&&d[a][c].apply(d[a],e)})};this.add=function(b,c){var a;return typeof b=="string"&&typeof c=="object"&&c?(d[b]=c,c.getName=function(){return b},a=this,c.apply=function(){a.apply.apply(a,arguments)},true):false};this.get=function(b){return d[b]};
this.del=function(b){return delete d[b]};this.rename=function(b,c){var a=this.get(b);return a&&this.add(c,a)?this.del(b):false};this.apply=function(d){return d instanceof HTMLElement?(d=h.getNodes(d),b.loop(b.toArray(d),function(c){b.loop(c.dataset,function(a,b){e(c,a,b)})}),true):false}}});
define("Olives/Text",["Olives/OObject","Olives/Model-plugin"],function(b,h){function d(b){this.template="<p data-model='toText:content'></p>";this.model.reset(b);this.plugins.add("model",new h(this.model))}return function(f){d.prototype=new b;return new d(f)}});
