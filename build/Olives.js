define("Olives/DomUtils",["Tools"],function(){return{getNodes:function(c,d){return c instanceof HTMLElement?(c.parentNode||document.createDocumentFragment().appendChild(c),c.parentNode.querySelectorAll(d||"*")):false}}});define("Olives/Event-plugin",function(){return function(c){this.listen=function(d,g,h,i){d.addEventListener(g,function(a){c[h].call(c,a,d)},i=="true")}}});
define("Olives/Model-plugin",["Store","Observable","Tools","Olives/DomUtils"],function(c,d,g,h){return function(i){var a=null;this.observers={};this.setModel=function(b){return b instanceof c?(a=b,true):false};this.getModel=function(){return a};this.ItemRenderer=function(a){var e=null;this.set=function(a){e=a;return true};this.get=function(){return e};this.associate=function(a,f){var b=e.cloneNode(true),c=h.getNodes(b);g.toArray(c).forEach(function(b){b.dataset[f+"_id"]=a});return b};this.set(a)};
this.foreach=function(b){var e,c=b.querySelector("*"),f=new this.ItemRenderer(c);e=document.createDocumentFragment();a.loop(function(a,b){e.appendChild(this.plugins.apply(f.associate(b,this.plugins.name)))},this);b.replaceChild(e,c);a.watch("added",function(a){b.insertBefore(this.plugins.apply(f.associate(a,this.plugins.name)),b.childNodes[a])},this);a.watch("deleted",function(f){b.removeChild(b.childNodes[f]);this.observers[f].forEach(function(f){a.unwatchValue(f)},this);delete this.observers[f]},
this)};this.bind=function(b,e,c){var c=c||"",f=b.dataset[this.plugins.name+"_id"],i=c.split("."),d=f||i.shift(),h=f?c:i.join(".");if((f=g.getNestedProperty(a.get(d),h))||f===0)b[e]=f;b.addEventListener("change",function(){if(h){var f=a.get(d);g.setNestedProperty(f,c,b[e]);a.set(d,f)}else a.set(d,b[e])},true);this.observers[d]=this.observers[d]||[];this.observers[d].push(a.watchValue(d,function(a){b[e]=g.getNestedProperty(a,h)}))};this.set=function(b){return b instanceof HTMLElement&&b.name?(a.set(b.name,
b.value),true):false};this.form=function e(e){if(e&&e.nodeName=="FORM"){var a=this;e.addEventListener("submit",function(f){g.toArray(e.querySelectorAll("[name]")).forEach(a.set,a);f.preventDefault()},true);return true}else return false};this.setModel(i)}});
define("Olives/OObject",["StateMachine","Store","Olives/Plugins","Olives/DomUtils","Tools"],function(c,d,g,h,i){return function(a){var b=function(a){a=a.UI;if(a.template)typeof a.template=="string"?a.dom.innerHTML=a.template:a.template instanceof HTMLElement&&a.dom.appendChild(a.template),a.plugins.apply(a.dom),a.onRender&&a.onRender();else throw Error("UI.template must be set prior to render");},e=function(a){var b=a.UI;if(a.params)i.toArray(b.dom.childNodes).forEach(function(b){a.params.appendChild(b)}),
b.dom=a.params;b.onPlace&&b.onPlace()},h=new c("Init",{Init:[["render",b,this,"Rendered"],["place",function(a){b(a);e(a)},this,"Rendered"]],Rendered:[["place",e,this],["render",b,this]]});this.model=a instanceof d?a:new d;this.plugins=new g;this.template=null;this.dom=document.createElement("div");this.onRender=function(){};this.action=function(a,b){h.event(a,{UI:this,params:b})};this.onPlace=function(){}}});
define("Olives/Plugins",["Tools","Olives/DomUtils"],function(c,d){return function(){var g={},h=function(a){return a.trim()},i=function(a,b,e){b.split(";").forEach(function(b){var c=b.split(":"),b=c[0].trim(),c=c[1]?c[1].split(",").map(h):[];c.unshift(a);g[e]&&g[e][b]&&g[e][b].apply(g[e],c)})};this.add=function(a,b){var c=this;return typeof a=="string"&&typeof b=="object"&&b?(g[a]=b,b.plugins={name:a,apply:function(){return c.apply.apply(c,arguments)}},true):false};this.addAll=function(a){return c.loop(a,
function(a,c){this.add(c,a)},this)};this.get=function(a){return g[a]};this.del=function(a){return delete g[a]};this.apply=function(a){var b;return a instanceof HTMLElement?(b=d.getNodes(a),c.loop(c.toArray(b),function(a){c.loop(a.dataset,function(b,c){i(a,b,c)})}),a):false}}});
define("Olives/Type-plugin",["Olives/OObject","Tools"],function(c,d){return function(g){var h={};this.place=function(d,a){if(h[a]instanceof c)h[a].action("place",d);else throw Error(a+" is not an OObject UI in place:"+a);};this.set=function(d,a){return typeof d=="string"&&a instanceof c?(h[d]=a,true):false};this.setAll=function(c){d.loop(c,function(a,b){this.set(b,a)},this)};this.get=function(c){return h[c]};this.setAll(g)}});
