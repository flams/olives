define("Olives/DomUtils",function(){return{getNodes:function(d,g){return d instanceof HTMLElement?(d.parentNode||document.createDocumentFragment().appendChild(d),d.parentNode.querySelectorAll(g||"*")):false},loopNodes:function(d,g,h){return d instanceof NodeList&&g instanceof Function?(Array.prototype.slice.call(d,0).forEach(g,h),true):false}}});define("Olives/Event-plugin",function(){return function(d){this.listen=function(g,h,i,f){g.addEventListener(h,function(a){d[i].call(d,a,g)},f=="true")}}});
define("Olives/Model-plugin",["Store","Observable","Tools","Olives/DomUtils"],function(d,g,h,i){return function(f){var a=null;this.setModel=function(c){return c instanceof d?(a=c,true):false};this.getModel=function(){return a};this.ItemRenderer=function(a){var e=null;this.set=function(b){e=b;return true};this.get=function(){return e};this.associate=function(b,a){var c=e.cloneNode(true),d=i.getNodes(c);i.loopNodes(d,function(c){c.dataset[a+"_id"]=b});return c};this.set(a)};this.toList=function(c){var e,
b=c.querySelector("*"),j=new this.ItemRenderer(b);e=document.createDocumentFragment();a.loop(function(a,b){e.appendChild(this.plugins.apply(j.associate(b,this.plugins.name)))},this);c.replaceChild(e,b);a.watch("added",function(b){c.insertBefore(this.plugins.apply(j.associate(b,this.plugins.name)),c.childNodes[b])},this);a.watch("deleted",function(b){c.replaceChild(document.createTextNode(""),c.childNodes[b])})};this.bind=function(c,e,b){var b=b||"",j=c.dataset[this.plugins.name+"_id"],d=b.split("."),
f=j||d.shift(),g=j?b:d.join(".");if((j=h.getNestedProperty(a.get(f),g))||j===0)c[e]=j;c.addEventListener("change",function(){if(g){var d=a.get(f);h.setNestedProperty(d,b,c[e]);a.set(f,d)}else a.set(f,c[e])},true);a.watchValue(f,function(b){c[e]=h.getNestedProperty(b,g)})};this.set=function(c){return c instanceof HTMLElement&&c.name?(a.set(c.name,c.value),true):false};this.form=function e(e){if(e&&e.nodeName=="FORM"){var b=this;e.addEventListener("submit",function(a){i.loopNodes(e.querySelectorAll("[name]"),
b.set,b);a.preventDefault()},true);return true}else return false};this.setModel(f)}});
define("Olives/OObject",["StateMachine","Store","Olives/Plugins"],function(d,g,h){return function(i){var f=function(b){b=b.UI;if(b.template)b.dom=c,typeof b.template=="string"?b.dom.innerHTML=b.template:b.template instanceof HTMLElement&&b.dom.appendChild(b.template),b.plugins.apply(b.dom),b.onRender&&b.onRender();else throw Error("UI.template must be set prior to render");},a=function(b){var a=b.UI;b.params&&b.params.appendChild(a.dom);a.onPlace&&a.onPlace()},c=document.createElement("div"),e=new d("Init",
{Init:[["render",f,this,"Rendered"],["place",function(b){f(b);a(b)},this,"Rendered"]],Rendered:[["place",a,this],["render",f,this]]});this.model=i instanceof g?i:new g;this.plugins=new h;this.dom=this.template=null;this.onRender=function(){};this.action=function(b,a){e.event(b,{UI:this,params:a})};this.onPlace=function(){}}});
define("Olives/Plugins",["Tools","Olives/DomUtils"],function(d,g){return function(){var h={},i=function(a){return a.trim()},f=function(a,c,e){c.split(";").forEach(function(b){var c=b.split(":"),b=c[0].trim(),c=c[1]?c[1].split(",").map(i):[];c.unshift(a);h[e]&&h[e][b]&&h[e][b].apply(h[e],c)})};this.add=function(a,c){var e=this;return typeof a=="string"&&typeof c=="object"&&c?(h[a]=c,c.plugins={name:a,apply:function(){return e.apply.apply(e,arguments)}},true):false};this.get=function(a){return h[a]};
this.del=function(a){return delete h[a]};this.apply=function(a){var c;return a instanceof HTMLElement?(c=g.getNodes(a),d.loop(d.toArray(c),function(a){d.loop(a.dataset,function(b,c){f(a,b,c)})}),a):false}}});
define("Olives/Type-plugin",["Olives/OObject","Tools"],function(d,g){return function(h){var i={};this.place=function(f,a){if(i[a]instanceof d)i[a].action("place",f);else throw Error(a+" is not an OObject UI in place:"+a);};this.set=function(f,a){return typeof f=="string"&&a instanceof d?(i[f]=a,true):false};this.setAll=function(d){g.loop(d,function(a,c){this.set(c,a)},this)};this.get=function(d){return i[d]};this.setAll(h)}});
