define("Olives/DomUtils",function(){return{getNodes:function(c,d){return c instanceof HTMLElement?(c.parentNode||document.createDocumentFragment().appendChild(c),c.parentNode.querySelectorAll(d||"*")):false},loopNodes:function(c,d,e){return c instanceof NodeList&&d instanceof Function?(Array.prototype.slice.call(c,0).forEach(d,e),true):false}}});define("Olives/Event-plugin",function(){return function(c){this.listen=function(d,e,g){d.addEventListener(e,function(e){c[g].call(c,e,d)},true)}}});
define("Olives/Model-plugin",["Store","Observable","Tools","Olives/DomUtils"],function(c,d,e,g){return function(i){var a=null;this.setModel=function(b){return b instanceof c?(a=b,true):false};this.getModel=function(){return a};this.ItemRenderer=function(a){var f=null;this.set=function(h){f=h;return true};this.get=function(){return f};this.associate=function(h,a){var b=f.cloneNode(true),c=g.getNodes(b);g.loopNodes(c,function(b){b.dataset[a+"_id"]=h});return b};this.set(a)};this.toList=function(b){var f,
h=new this.ItemRenderer(b.childNodes[0]);f=document.createDocumentFragment();a.loop(function(a,b){f.appendChild(this.plugins.apply(h.associate(b,this.plugins.name)))},this);b.replaceChild(f,b.childNodes[0]);a.watch("added",function(a){b.insertBefore(this.plugins.apply(h.associate(a,this.plugins.name)),b.childNodes[a])},this);a.watch("deleted",function(a){b.replaceChild(document.createTextNode(""),b.childNodes[a])})};this.bind=function(b,f,h){var h=h||"",c=b.dataset[this.plugins.name+"_id"],i=h.split("."),
d=c||i.shift(),g=c?h:i.join(".");if((c=e.getNestedProperty(a.get(d),g))||c===0)b[f]=c;b.addEventListener("change",function(){if(g){var c=a.get(d);e.setNestedProperty(c,h,b[f]);a.set(d,c)}else a.set(d,b[f])},true);a.watchValue(d,function(a){b[f]=e.getNestedProperty(a,g)})};this.set=function(b){return b instanceof HTMLElement&&b.name?(a.set(b.name,b.value),true):false};this.form=function f(f){if(f&&f.nodeName=="FORM"){var a=this;f.addEventListener("submit",function(c){g.loopNodes(f.querySelectorAll("[name]"),
a.set,a);c.preventDefault()},true);return true}else return false};this.setModel(i)}});
define("Olives/OObject",["StateMachine","Store","Olives/Plugins"],function(c,d,e){return function(g){var i=function(a){a=a.UI;if(a.template)a.dom=b,typeof a.template=="string"?a.dom.innerHTML=a.template:a.template instanceof HTMLElement&&a.dom.appendChild(a.template),a.plugins.apply(a.dom),a.onRender&&a.onRender();else throw Error("UI.template must be set prior to render");},a=function(a){var b=a.UI;a.params&&a.params.appendChild(b.dom);b.onPlace&&b.onPlace()},b=document.createElement("div"),f=new c("Init",
{Init:[["render",i,this,"Rendered"],["place",function(b){i(b);a(b)},this,"Rendered"]],Rendered:[["place",a,this],["render",i,this]]});this.model=g instanceof d?g:new d;this.plugins=new e;this.dom=this.template=null;this.onRender=function(){};this.action=function(a,b){f.event(a,{UI:this,params:b})};this.onPlace=function(){}}});
define("Olives/Plugins",["Tools","Olives/DomUtils"],function(c,d){return function(){var e={},g=function(a){return a.trim()},i=function(a,b,c){b.split(";").forEach(function(b){var d=b.split(":"),b=d[0].trim(),d=d[1]?d[1].split(",").map(g):[];d.unshift(a);e[c]&&e[c][b]&&e[c][b].apply(e[c],d)})};this.add=function(a,b){var c=this;return typeof a=="string"&&typeof b=="object"&&b?(e[a]=b,b.plugins={name:a,apply:function(){return c.apply.apply(c,arguments)}},true):false};this.get=function(a){return e[a]};
this.del=function(a){return delete e[a]};this.apply=function(a){var b;return a instanceof HTMLElement?(b=d.getNodes(a),c.loop(c.toArray(b),function(a){c.loop(a.dataset,function(b,c){i(a,b,c)})}),a):false}}});
define("Olives/Type-plugin",["Olives/OObject","Tools"],function(c,d){return function(e){var g={};this.place=function(d,a){if(g[a]instanceof c)g[a].action("place",d);else throw Error(a+" is not an OObject UI in place:"+a);};this.set=function(d,a){return typeof d=="string"&&a instanceof c?(g[d]=a,true):false};this.setAll=function(c){d.loop(c,function(a,b){this.set(b,a)},this)};this.get=function(c){return g[c]};this.setAll(e)}});
