define("Olives/DomUtils",function(){return{getNodes:function(d,g){return d instanceof HTMLElement?(d.parentNode||document.createDocumentFragment().appendChild(d),d.parentNode.querySelectorAll(g||"*")):false}}});define("Olives/List",["Olives/OObject","Olives/Model-plugin"],function(d,g){function f(){this.template="<ul data-model='toList'><li data-model='toText'></li></ul>";this.plugins.add("model",new g(this.model))}return function(g){f.prototype=new d(g);return new f}});
define("Olives/Model-plugin",["Store","Observable","Tools","Olives/DomUtils"],function(d,g,f,h){return function(i){var c=null,j=new g;this.setModel=function(b){return b instanceof d?(c=b,c.watch("updated",function(a,e){j.notify(a,e)}),c.watch("added",function(a,e){j.notify(a,e)}),true):false};this.getModel=function(){return c};this.ItemRenderer=function(b){var a=null;this.set=function(e){a=e;return true};this.get=function(){return a};this.associate=function(e,b){var c=a.cloneNode(true),d=h.getNodes(c,
"[data-"+b+"]");f.loop(d,function(a){a&&(a.dataset[b+".id"]=e)});return c};this.set(b)};this.toList=function(b){var a,e=new this.ItemRenderer(b.childNodes[0]);a=document.createDocumentFragment();c.loop(function(b,c){a.appendChild(this.plugins.apply(e.associate(c,this.plugins.name)))},this);b.replaceChild(a,b.childNodes[0]);c.watch("added",function(a){b.insertBefore(this.plugins.apply(e.associate(a,this.plugins.name)),b.childNodes[a])},this);c.watch("deleted",function(a){b.replaceChild(document.createTextNode(""),
b.childNodes[a])})};this.toText=function(b,a){var a=a||"",e=b.dataset[this.plugins.name+".id"],d=a.split("."),g=e||d.shift(),h=e?a:d.join(".");if(e=f.getObjectsProperty(c.get(g),h))b.innerHTML=e;j.watch(g,function(a){b.innerHTML=f.getObjectsProperty(a,h)})};this.setModel(i)}});
define("Olives/OObject",["StateMachine","Store","Olives/Plugins"],function(d,g,f){return function(h){var i=function(a){a=a.UI;if(a.template)a.dom=j,typeof a.template=="string"?a.dom.innerHTML=a.template:a.template instanceof HTMLElement&&a.dom.appendChild(a.template),a.plugins.apply(a.dom),a.onRender&&a.onRender();else throw Error("UI.template must be set prior to render");},c=function(a){var b=a.UI;a.params&&a.params.appendChild(b.dom);b.onPlace&&b.onPlace()},j=document.createElement("div"),b=new d("Init",
{Init:[["render",i,this,"Rendered"],["place",function(a){i(a);c(a)},this,"Rendered"]],Rendered:[["place",c,this],["render",i,this]]});this.model=h instanceof g?h:new g;this.plugins=new f;this.dom=this.template=null;this.onRender=function(){};this.action=function(a,c){b.event(a,{UI:this,params:c})};this.onPlace=function(){}}});
define("Olives/Plugins",["Tools","Olives/DomUtils"],function(d,g){return function(){var f={},h=function(c){return c.trim()},i=function(c,d,b){d.split(";").forEach(function(a){var e=a.split(":"),a=e[0].trim(),e=e[1]?e[1].split(",").map(h):[];e.unshift(c);f[b]&&f[b][a]&&f[b][a].apply(f[b],e)})};this.add=function(c,d,b){var a=this,e="plugins";return typeof c=="string"&&typeof d=="object"&&d?(typeof b=="string"&&(e=b),f[c]=d,d[e]={name:c,apply:function(){return a.apply.apply(a,arguments)}},true):false};
this.get=function(c){return f[c]};this.del=function(c){return delete f[c]};this.apply=function(c){var f;return c instanceof HTMLElement?(f=g.getNodes(c),d.loop(d.toArray(f),function(b){d.loop(b.dataset,function(a,c){i(b,a,c)})}),c):false}}});define("Olives/Text",["Olives/OObject","Olives/Model-plugin"],function(d,g){function f(d){this.template="<p data-model='toText:content'></p>";this.model.reset(d);this.plugins.add("model",new g(this.model))}return function(g){f.prototype=new d;return new f(g)}});
