define("Olives/DomUtils",function(){return{getNodes:function(b,f){return b instanceof HTMLElement?(b.parentNode||document.createDocumentFragment().appendChild(b),b.parentNode.querySelectorAll(f||"*")):false}}});define("Olives/Event-plugin",function(){return function(b){this.listen=function(f,e,g){f.addEventListener(e,b[g])}}});
define("Olives/List",["Olives/OObject","Olives/Model-plugin"],function(b,f){function e(){this.template="<ul data-model='toList'><li data-model='toText'></li></ul>";this.plugins.add("model",new f(this.model))}return function(f){e.prototype=new b(f);return new e}});
define("Olives/Model-plugin",["Store","Observable","Tools","Olives/DomUtils"],function(b,f,e,g){return function(h){var d=null,j=new f;this.setModel=function(c){return c instanceof b?(d=c,d.watch("updated",function(a,c){j.notify(a,c)}),d.watch("added",function(a,c){j.notify(a,c)}),true):false};this.getModel=function(){return d};this.ItemRenderer=function(c){var a=null;this.set=function(c){a=c;return true};this.get=function(){return a};this.associate=function(c,d){var b=a.cloneNode(true),f=g.getNodes(b,
"[data-"+d+"]");e.loop(f,function(a){a&&(a.dataset[d+".id"]=c)});return b};this.set(c)};this.toList=function(c){var a,i=new this.ItemRenderer(c.childNodes[0]);a=document.createDocumentFragment();d.loop(function(c,d){a.appendChild(this.plugins.apply(i.associate(d,this.plugins.name)))},this);c.replaceChild(a,c.childNodes[0]);d.watch("added",function(a){c.insertBefore(this.plugins.apply(i.associate(a,this.plugins.name)),c.childNodes[a])},this);d.watch("deleted",function(a){c.replaceChild(document.createTextNode(""),
c.childNodes[a])})};this.toText=function(c,a){var a=a||"",i=c.dataset[this.plugins.name+".id"],b=a.split("."),f=i||b.shift(),g=i?a:b.join(".");if(i=e.getNestedProperty(d.get(f),g))c.innerHTML=i;j.watch(f,function(a){c.innerHTML=e.getNestedProperty(a,g)})};this.set=function(c){return c instanceof HTMLElement&&c.name?(d.set(c.name,c.value),true):false};this.form=function a(a){if(a&&a.nodeName=="FORM"){var d=this;a.addEventListener("submit",function(b){e.loop(a.querySelectorAll("[name]"),d.set,d);b.preventDefault()},
true);return true}else return false};this.setModel(h)}});
define("Olives/OObject",["StateMachine","Store","Olives/Plugins"],function(b,f,e){return function(g){var h=function(a){a=a.UI;if(a.template)a.dom=j,typeof a.template=="string"?a.dom.innerHTML=a.template:a.template instanceof HTMLElement&&a.dom.appendChild(a.template),a.plugins.apply(a.dom),a.onRender&&a.onRender();else throw Error("UI.template must be set prior to render");},d=function(a){var c=a.UI;a.params&&a.params.appendChild(c.dom);c.onPlace&&c.onPlace()},j=document.createElement("div"),c=new b("Init",
{Init:[["render",h,this,"Rendered"],["place",function(a){h(a);d(a)},this,"Rendered"]],Rendered:[["place",d,this],["render",h,this]]});this.model=g instanceof f?g:new f;this.plugins=new e;this.dom=this.template=null;this.onRender=function(){};this.action=function(a,d){c.event(a,{UI:this,params:d})};this.onPlace=function(){}}});
define("Olives/Plugins",["Tools","Olives/DomUtils"],function(b,f){return function(){var e={},g=function(d){return d.trim()},h=function(d,b,c){b.split(";").forEach(function(a){var b=a.split(":"),a=b[0].trim(),b=b[1]?b[1].split(",").map(g):[];b.unshift(d);e[c]&&e[c][a]&&e[c][a].apply(e[c],b)})};this.add=function(d,b){var c=this;return typeof d=="string"&&typeof b=="object"&&b?(e[d]=b,b.plugins={name:d,apply:function(){return c.apply.apply(c,arguments)}},true):false};this.get=function(b){return e[b]};
this.del=function(b){return delete e[b]};this.apply=function(d){var e;return d instanceof HTMLElement?(e=f.getNodes(d),b.loop(b.toArray(e),function(c){b.loop(c.dataset,function(a,b){h(c,a,b)})}),d):false}}});define("Olives/Text",["Olives/OObject","Olives/Model-plugin"],function(b,f){function e(b){this.template="<p data-model='toText:content'></p>";this.model.reset(b);this.plugins.add("model",new f(this.model))}return function(f){e.prototype=new b;return new e(f)}});
define("Olives/Type-plugin",function(){return function(){this.ui=function(b,f){require([f],function(e){(new e).action("place",b)})}}});
