/*
 Olives <VERSION> http://flams.github.com/olives
 The MIT License (MIT)
 Copyright (c) 2012-2014 Olivier Scherrer <pode.fr@gmail.com> - Olivier Wietrich <olivier.wietrich@gmail.com>
*/
require=function e$$0(f,g,j){function h(e,c){if(!g[e]){if(!f[e]){var a=typeof require=="function"&&require;if(!c&&a)return a(e,true);if(d)return d(e,true);throw Error("Cannot find module '"+e+"'");}a=g[e]={exports:{}};f[e][0].call(a.exports,function(a){var c=f[e][1][a];return h(c?c:a)},a,a.exports,e$$0,f,g,j)}return g[e].exports}for(var d=typeof require=="function"&&require,i=0;i<j.length;i++)h(j[i]);return h}({1:[function(b,f){var g=b("emily").Store;b("emily");var j=b("emily").Tools,h=b("./DomUtils");
f.exports=function(d,i){function e(a){b[a]&&(b[a].forEach(function(a){c.unwatchValue(a)}),delete b[a])}var c=null,a={},k={},b={};this.observers=b;this.setModel=function(a){return a instanceof g?(c=a,true):false};this.getModel=function(){return c};this.ItemRenderer=function(a,d){var k=null,i=null,b=null,g=null,f=null;this.setRenderer=function(a){k=a;return true};this.getRenderer=function(){return k};this.setRootNode=function(a){return h.isAcceptedType(a)?(b=a,a=b.querySelector("*"),this.setRenderer(a),
a&&b.removeChild(a),true):false};this.getRootNode=function(){return b};this.setPlugins=function(a){i=a;return true};this.getPlugins=function(){return i};this.items={};this.setStart=function(a){return g=parseInt(a,10)};this.getStart=function(){return g};this.setNb=function(a){return f=a=="*"?a:parseInt(a,10)};this.getNb=function(){return f};this.addItem=function(a){var c;return typeof a=="number"&&!this.items[a]?(c=this.getNextItem(a),(a=this.create(a))?(c?b.insertBefore(a,c):b.appendChild(a),true):
false):false};this.getNextItem=function(a){var c=Object.keys(this.items).map(function(a){return Number(a)}),l=j.closestGreater(a,c),c=c[l];if(c!=a)return this.items[c]};this.removeItem=function(a){var c=this.items[a];return c?(b.removeChild(c),delete this.items[a],e(a),true):false};this.create=function(a){if(c.has(a)){var l=k.cloneNode(true),d=h.getNodes(l);j.toArray(d).forEach(function(c){c.setAttribute("data-"+i.name+"_id",a)});this.items[a]=l;i.apply(l);return l}};this.render=function(){var a=
f=="*"?c.getNbItems():f,l=[];if(f!==null&&g!==null){j.loop(this.items,function(d,e){e=Number(e);(e<g||e>=g+a||!c.has(e))&&l.push(e)},this);l.sort(j.compareNumbers).reverse().forEach(this.removeItem,this);for(var d=g,e=a+g;d<e;d++)this.addItem(d);return true}else return false};this.setPlugins(a);this.setRootNode(d)};this.setItemRenderer=function(a,c){k[a||"default"]=c};this.getItemRenderer=function(a){return k[a]};this.foreach=function(a,d,j,b){var h=new this.ItemRenderer(this.plugins,a);h.setStart(j||
0);h.setNb(b||"*");h.render();c.watch("added",h.render,h);c.watch("deleted",function(a){h.render();e(a)},this);this.setItemRenderer(d,h)};this.updateStart=function(a,c){var d=this.getItemRenderer(a);return d?(d.setStart(c),true):false};this.updateNb=function(a,c){var d=this.getItemRenderer(a);return d?(d.setNb(c),true):false};this.refresh=function(a){return(a=this.getItemRenderer(a))?(a.render(),true):false};this.bind=function(a,d,e){var e=e||"",b=a.getAttribute("data-"+this.plugins.name+"_id"),k=
e.split("."),i=b||k.shift(),g=b?e:k.join("."),b=j.getNestedProperty(c.get(i),g),f=j.toArray(arguments).slice(3);if(b||b===0||b===false)this.execBinding.apply(this,[a,d,b].concat(f))||h.setAttribute(a,d,b);this.hasBinding(d)||a.addEventListener("change",function(){c.has(i)&&(g?c.update(i,e,a[d]):c.set(i,a[d]))},true);this.observers[i]=this.observers[i]||[];this.observers[i].push(c.watchValue(i,function(c){this.execBinding.apply(this,[a,d,j.getNestedProperty(c,g)].concat(f))||h.setAttribute(a,d,j.getNestedProperty(c,
g))},this))};this.set=function(a){return h.isAcceptedType(a)&&a.name?(c.set(a.name,a.value),true):false};this.getItemIndex=function(a){return(a=h.getDataset(a))&&typeof a[this.plugins.name+"_id"]!="undefined"?+a[this.plugins.name+"_id"]:false};this.form=function(a){if(a&&a.nodeName=="FORM"){var c=this;a.addEventListener("submit",function(d){j.toArray(a.querySelectorAll("[name]")).forEach(c.set,c);d.preventDefault()},true);return true}else return false};this.addBinding=function(c,d){return c&&typeof c==
"string"&&typeof d=="function"?(a[c]=d,true):false};this.execBinding=function(c,d){return this.hasBinding(d)?(a[d].apply(c,Array.prototype.slice.call(arguments,2)),true):false};this.hasBinding=function(c){return a.hasOwnProperty(c)};this.getBinding=function(c){return a[c]};this.addBindings=function(a){return j.loop(a,function(a,c){this.addBinding(c,a)},this)};this.setModel(d);this.addBindings(i)}},{"./DomUtils":2}],2:[function(b,f){var g=b("emily").Tools;f.exports={getNodes:function(b,h){return this.isAcceptedType(b)?
(b.parentNode||document.createDocumentFragment().appendChild(b),b.parentNode.querySelectorAll(h||"*")):false},getDataset:function(b){var h=0,d,i={},e,c;if(this.isAcceptedType(b))if(b.hasOwnProperty("dataset"))return b.dataset;else{for(d=b.attributes.length;h<d;h++)e=b.attributes[h].name.split("-"),e.shift()=="data"&&(i[c=e.join("-")]=b.getAttribute("data-"+c));return i}else return false},isAcceptedType:function(b){return b instanceof HTMLElement||b instanceof SVGElement?true:false},setAttribute:function(b,
h,d){return b instanceof HTMLElement?(b[h]=d,true):b instanceof SVGElement?(b.setAttribute(h,d),true):false},matches:function(b,h,d){return g.toArray(this.getNodes(b,h)).indexOf(d)>-1}}},{}],3:[function(b,f){var g=b("./DomUtils");f.exports=function(b,h){var d=null,i={mousedown:"touchstart",mouseup:"touchend",mousemove:"touchmove"},e=!!h;this.addEventListener=function(c,a,d,b){c.addEventListener(this.map(a),d,!!b)};this.listen=function(c,a,b,e){this.addEventListener(c,a,function(a){d[b].call(d,a,c)},
!!e)};this.delegate=function(c,a,b,e,h){this.addEventListener(c,b,function(b){g.matches(c,a,b.target)&&d[e].call(d,b,c)},!!h)};this.getParent=function(){return d};this.setParent=function(c){return c instanceof Object?(d=c,true):false};this.map=function(c){return e?i[c]||c:c};this.setMap=function(c,a){return typeof c=="string"&&typeof a=="string"?(i[c]=a,true):false};this.setParent(b)}},{"./DomUtils":2}],4:[function(b,f){function g(){var d=null,b=localStorage,e=function(){b.setItem(d,this.toJSON())};
this.setLocalStorage=function(c){return c&&c.setItem instanceof Function?(b=c,true):false};this.getLocalStorage=function(){return b};this.sync=function(c){return typeof c=="string"?(d=c,c=JSON.parse(b.getItem(c)),h.loop(c,function(a,c){this.has(c)||this.set(c,a)},this),e.call(this),this.watch("added",e,this),this.watch("updated",e,this),this.watch("deleted",e,this),true):false}}var j=b("emily").Store,h=b("emily").Tools;f.exports=function(d){g.prototype=new j(d);return new g}},{}],5:[function(b,f){function g(){function d(){window.location.hash?
this.navigate.apply(this,this.parse(window.location.hash)):this.navigate(e)}var b,e="",c=window.location.hash;this.setDefaultRoute=function(a){return a&&typeof a=="string"?(e=a,true):false};this.getDefaultRoute=function(){return e};this.parse=function(a){return a.split("#").pop().split("/")};this.toUrl=function(a){return a.join("/")};this.start=function(a){this.setDefaultRoute(a);d.call(this);this.bindOnHashChange();this.bindOnRouteChange()};this.destroy=function(){this.unwatch(b);window.removeEventListener("hashchange",
this.boundOnHashChange,true)};this.onHashChange=function(){window.location.hash!=c&&d.call(this)};this.boundOnHashChange=this.onHashChange.bind(this);this.bindOnHashChange=function(){window.addEventListener("hashchange",this.boundOnHashChange,true)};this.bindOnRouteChange=function(){b=this.watch(this.onRouteChange,this)};this.onRouteChange=function(){window.location.hash=this.toUrl(h.toArray(arguments));c=window.location.hash};this.getLastRoute=function(){return c}}var j=b("emily").Router,h=b("emily").Tools;
f.exports=function(){g.prototype=new j;return new g}},{}],6:[function(b,f){var g=b("emily").StateMachine,j=b("emily").Store,h=b("./Plugins"),d=b("./DomUtils"),i=b("emily").Tools;f.exports=function(b){var c=function(a){var c=k||document.createElement("div");if(a.template){typeof a.template=="string"?c.innerHTML=a.template.trim():d.isAcceptedType(a.template)&&c.appendChild(a.template);if(c.childNodes.length>1)throw Error("UI.template should have only one parent node");else a.dom=c.childNodes[0];a.plugins.apply(a.dom)}else throw Error("UI.template must be set prior to render");
},a=function(a,c,b){c&&(b?c.insertBefore(a.dom,b):c.appendChild(a.dom),k=c)},k=null,f=new g("Init",{Init:[["render",c,this,"Rendered"],["place",function(b,d){c(b);a.apply(null,i.toArray(arguments))},this,"Rendered"]],Rendered:[["place",a,this],["render",c,this]]});this.model=b instanceof j?b:new j;this.plugins=new h;this.dom=this.template=null;this.place=function(a,c){f.event("place",this,a,c)};this.render=function(){f.event("render",this)};this.setTemplateFromDom=function(a){return d.isAcceptedType(a)?
(this.template=a,true):false};this.alive=function(a){return d.isAcceptedType(a)?(this.setTemplateFromDom(a),this.place(a.parentNode,a.nextElementSibling),true):false};this.getCurrentPlace=function(){return k}}},{"./DomUtils":2,"./Plugins":8}],7:[function(b,f){var g=b("./OObject"),j=b("emily").Tools;f.exports=function(b){var d={};this.place=function(b,e){if(d[e]instanceof g)d[e].place(b);else throw Error(e+" is not an OObject UI in place:"+e);};this.set=function(b,e){return typeof b=="string"&&e instanceof
g?(d[b]=e,true):false};this.setAll=function(b){j.loop(b,function(b,c){this.set(c,b)},this)};this.get=function(b){return d[b]};this.setAll(b)}},{"./OObject":6}],8:[function(b,f){var g=b("emily").Tools,j=b("./DomUtils");f.exports=function(b){var d={},i=function(c){return c.trim()},e=function(c,a,b){a.split(";").forEach(function(a){var e=a.split(":"),a=e[0].trim(),e=e[1]?e[1].split(",").map(i):[];e.unshift(c);d[b]&&d[b][a]&&d[b][a].apply(d[b],e)})};this.add=function(c,a){var b=this;return typeof c==
"string"&&typeof a=="object"&&a?(d[c]=a,a.plugins={name:c,apply:function(){return b.apply.apply(b,arguments)}},true):false};this.addAll=function(c){return g.loop(c,function(a,c){this.add(c,a)},this)};this.get=function(c){return d[c]};this.del=function(c){return delete d[c]};this.apply=function(c){var a;return j.isAcceptedType(c)?(a=j.getNodes(c),g.loop(g.toArray(a),function(a){g.loop(j.getDataset(a),function(c,b){e(a,c,b)})}),c):false};this.addAll(b)}},{"./DomUtils":2}],9:[function(b,f){f.exports=
function(b){var f=null;this.setSocket=function(b){return b&&typeof b.emit=="function"?(f=b,true):false};this.getSocket=function(){return f};this.on=function(b,d){return f.on(b,d)};this.once=function(b,d){return f.once(b,d)};this.emit=function(b,d,i){return f.emit(b,d,i)};this.removeListener=function(b,d,i){return f.removeListener(b,d,i)};this.request=function(b,d,f,e){return typeof b=="string"&&typeof d!="undefined"?(d={eventId:Date.now()+Math.floor(Math.random()*1E6),data:d},this.once(d.eventId,
function(){f&&f.apply(e||null,arguments)}),this.emit(b,d),true):false};this.listen=function(b,d,f,e){if(typeof b=="string"&&typeof d!="undefined"&&typeof f=="function"){var c={eventId:Date.now()+Math.floor(Math.random()*1E6),data:d,keepAlive:true},a=function(){f&&f.apply(e||null,arguments)},g=this;this.on(c.eventId,a);this.emit(b,c);return function(){g.emit("disconnect-"+c.eventId);g.removeListener(c.eventId,a)}}else return false};this.setSocket(b)}},{}],10:[function(b,f){var g=b("emily").Tools;f.exports=
function(b){function f(a){if(!(a>=e.length)){var b=e[a];return g.toArray(d.childNodes).indexOf(b)==-1?f(a+1):b}}var d=document.createDocumentFragment(),i=document.createElement("div"),e=[],c=null;this.add=function(a){return!this.has(a)&&a instanceof HTMLElement?(d.appendChild(a),e.push(a),a):false};this.remove=function(a){var b;return this.has(a)?(b=e.indexOf(a),d.removeChild(a),e.splice(b,1),a):false};this.place=function(a){return a instanceof HTMLElement?([].slice.call(d.childNodes).forEach(function(b){this.has(b)&&
a.appendChild(b)},this),this._setParent(a)):false};this.up=function(a){if(this.has(a)){var b=this.getPosition(a);this.move(a,b+1);return a}else return false};this.down=function(a){if(this.has(a)){var b=this.getPosition(a);this.move(a,b-1);return a}else return false};this.move=function(a,b){if(this.has(a)){var c=e.indexOf(a);e.splice(c,1);(c=f(b))?d.insertBefore(a,c):d.appendChild(a);e.splice(b,0,a);return a}else return false};this.insert=function(a,b){return!this.has(a)&&a instanceof HTMLElement?
(e.splice(b,0,a),d.insertBefore(a,d.childNodes[b]),a):false};this.getPosition=function(a){return e.indexOf(a)};this.count=function(){return d.childNodes.length};this.has=function(a){return this.getPosition(a)>=0};this.hide=function(a){return this.has(a)?(i.appendChild(a),true):false};this.show=function(a){return this.has(a)&&a.parentNode===i?(this.move(a,e.indexOf(a)),true):false};this.hideAll=function(){e.forEach(this.hide,this)};this.showAll=function(){e.forEach(this.show,this)};this.getParent=
function(){return d};this._setParent=function(a){return a instanceof HTMLElement?d=a:false};this.getHidePlace=function(){return i};this.setHidePlace=function(a){return a instanceof HTMLElement?(i=a,true):false};this.getLastTransit=function(){return c};this.transit=function(a){c&&this.hide(c);return this.show(a)?(c=a,true):false};this._setParent(b)}},{}],olives:[function(b,f){f.exports=b("tOz32x")},{}],tOz32x:[function(b,f){f.exports={"Bind.plugin":b("./Bind.plugin"),DomUtils:b("./DomUtils"),"Event.plugin":b("./Event.plugin"),
LocalStore:b("./LocalStore"),LocationRouter:b("./LocationRouter"),OObject:b("./OObject"),"Place.plugin":b("./Place.plugin"),Plugins:b("./Plugins"),SocketIOTransport:b("./SocketIOTransport"),Stack:b("./Stack")}},{"./Bind.plugin":1,"./DomUtils":2,"./Event.plugin":3,"./LocalStore":4,"./LocationRouter":5,"./OObject":6,"./Place.plugin":7,"./Plugins":8,"./SocketIOTransport":9,"./Stack":10}],13:[function(){},{}]},{},[]);
