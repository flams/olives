define("Observable",function(){function d(){var c={};this.watch=function(b,a,e){if(typeof b=="string"&&typeof a=="function"){var f=c[b]=c[b]||[];observer=[a,e];f.push(observer);return[b,f.indexOf(observer)]}else return false};this.unwatch=function(b){var a=b[0],b=b[1];return c[a]&&c[a][b]?(c[a][b]=null,true):false};this.notify=function(b,a){var e=c[b],f;if(e){for(f=e.length;f--;)e[f]&&e[f][0].call(e[f][1]||null,a);return true}else return false};this.hasObserver=function(b){return!(!b||!c[b[0]]||!c[b[0]][b[1]])}}
return{create:function(){return new d}}});
define("StateMachine",function(){function d(){var b={},a="";this.init=function(e){return b[e]?(a=e,true):false};this.add=function(a){return b[a]?false:b[a]=new c};this.get=function(a){return b[a]};this.getCurrent=function(){return a};this.event=function(e,c){var d=b[a].event(e,c);return d===false?false:(a=d||a,true)}}function c(){var b={};this.add=function(a,e,c,d){var h=[];if(b[a])return false;return typeof a=="string"&&typeof e=="function"?(h[0]=e,typeof c=="object"&&(h[1]=c),typeof c=="string"&&
(h[2]=c),typeof d=="string"&&(h[2]=d),b[a]=h,true):false};this.has=function(a){return!!b[a]};this.event=function e(e,c){var d=b[e];return d?(d[0].call(d[1],c),d[2]):false}}return{create:function(b,a){var c=new d,f,g;for(f in a)a.hasOwnProperty(f)&&(g=c.add(f),a[f].forEach(function(a){g.add.apply(null,a)}));c.init(b);return c}}});
define("TinyStore",["Observable","Tools"],function(d,c){function b(a){var b={},f=c,g=d.create();f.mixin(a,b);this.getNbItems=function(){return f.count(b)};this.get=function(a){return b[a]};this.has=function(a){return b.hasOwnProperty(a)};this.set=function(a,c){return typeof a=="string"?(b[a]=c,g.notify(a,c),true):false};this.del=function(a){return this.has(a)?(delete b[a],g.notify(a,b[a]),true):false};this.watch=function(a,b,c){return g.watch(a,b,c)};this.unwatch=function(a){return g.unwatch(a)}}
return{create:function(a){return new b(a)}}});define("Tools",function(){return{getGlobal:function(){return function(){return this}.call(null)},mixin:function(d,c,b){for(var a in d)if(d.hasOwnProperty(a)&&(!c[a]||!b))c[a]=d[a]},count:function(d){var c=0,b;for(b in d)d.hasOwnProperty(b)&&c++;return c},compareObjects:function(d,c){return Object.getOwnPropertyNames(d).sort().join("")==Object.getOwnPropertyNames(c).sort().join("")},toArray:function(d){return Array.prototype.slice.call(d)}}});
define("Transport",function(){function d(){var c,b=io;this.connect=function(a){c=b.connect(a);return!!c};this.getSocket=function(){return c};this.on=function(a,b){c.on(a,b)};this.emit=function(a,b){c.emit(a,b)}}return{create:function(c){var b=new d(c);b.connect(c);return b}}});
