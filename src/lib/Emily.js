define("Observable",function(){function e(){var b={};this.watch=function(a,d,c){if(typeof a=="string"&&typeof d=="function"){var f=b[a]=b[a]||[];observer=[d,c];f.push(observer);return[a,f.indexOf(observer)]}else return false};this.unwatch=function(a){var d=a[0],a=a[1];return b[d]&&b[d][a]?(b[d][a]=null,true):false};this.notify=function(a,d){var c=b[a],f;if(c){for(f=c.length;f--;)c[f]&&c[f][0].call(c[f][1]||null,d);return true}else return false};this.hasObserver=function(a){return!(!a||!b[a[0]]||!b[a[0]][a[1]])}}
return{create:function(){return new e}}});
define("StateMachine",function(){function e(){var a={},d="";this.init=function(c){return a[c]?(d=c,true):false};this.add=function(c){return a[c]?false:a[c]=new b};this.get=function(c){return a[c]};this.getCurrent=function(){return d};this.event=function(c){c=a[d].event(c);return c===false?false:(d=c||d,true)}}function b(){var a={};this.add=function(d,c,b,e){var h=[];if(a[d])return false;return typeof d=="string"&&typeof c=="function"?(h[0]=c,typeof b=="object"&&(h[1]=b),typeof b=="string"&&(h[2]=
b),typeof e=="string"&&(h[2]=e),a[d]=h,true):false};this.has=function(d){return!!a[d]};this.event=function c(c,b){var e=a[c];return e?(e[0].call(e[1],b),e[2]):false}}return{create:function(a,d){var c=new e,b,g;for(b in d)d.hasOwnProperty(b)&&(g=c.add(b),d[b].forEach(function(a){g.add.apply(null,a)}));c.init(a);return c}}});
define("TinyStore",["Observable","Tools"],function(e,b){function a(a){var c={},f=b,g=e.create();f.mixin(a,c);this.getNbItems=function(){return f.count(c)};this.get=function(a){return c[a]};this.has=function(a){return c.hasOwnProperty(a)};this.set=function(a,b){return typeof a=="string"?(c[a]=b,g.notify(a,b),true):false};this.del=function(a){return this.has(a)?(delete c[a],g.notify(a,c[a]),true):false};this.watch=function(a,b,c){return g.watch(a,b,c)};this.unwatch=function(a){return g.unwatch(a)}}
return{create:function(b){return new a(b)}}});define("Tools",function(){return{getGlobal:function(){return function(){return this}.call(null)},mixin:function(e,b,a){for(var d in e)if(e.hasOwnProperty(d)&&(!b[d]||!a))b[d]=e[d]},count:function(e){var b=0,a;for(a in e)e.hasOwnProperty(a)&&b++;return b},compareObjects:function(e,b){return Object.getOwnPropertyNames(e).sort().join("")==Object.getOwnPropertyNames(b).sort().join("")},toArray:function(e){return Array.prototype.slice.call(e)}}});
define("Transport",function(){function e(){var b,a=io;this.connect=function(d){b=a.connect(d);return!!b};this.getSocket=function(){return b};this.on=function(a,c){b.on(a,c)};this.emit=function(a,c){b.emit(a,c)}}return{create:function(b){var a=new e(b);a.connect(b);return a}}});
