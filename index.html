<!doctype html>




<html>
<head>
<title>Olives - Create real-time HTML5 applications, in no time. By Olivier Scherrer &amp; Olivier Wietrich</title>
<meta name="description" content="Olives JS MVC Framework for real-time web applications. It provides you with a Transport layer that wraps the famous socket.io,
a powerful UI controller that you can extend with custom plugins, and built-in plugins for data binding. It's based on Emily JS Framework." />
<meta name="author" content="Olivier Scherrer &amp;amp Olivier Wietrich" />
<style type="text/css">
	* {
		margin: 0;
		padding: 0;
	}

	a {
		color: #333;
		text-decoration: none;
	}

	body {
		background-image: url(img/noise.jpg);
		color: #666;
		font-family: 'Belleza';
	}

	#olives {
		background-image: url(img/bgcartouche.jpg);
		background-repeat: repeat-x;
	}

	.header {
		height: 100px;
		width: 900px;
		color: white;
		padding: 30px;
		margin-left: auto;
		margin-right: auto;
		margin-bottom: 50px;
		text-align: center;
	}

	.header h1 {
		text-align: center;
		font-family: 'Great Vibes', cursive;
		font-size: 80px;
		text-shadow: 2px 2px 2px #333;
	}

	.header p {
		text-align: center;
		font-size: 24px;
		text-shadow: 1px 1px 1px #333;
	}

	.header p a {
		background-color: grey;
		padding: 10px;
		border-radius: 5px;
		color: white;
		background: #c9de96; /* Old browsers */
		background: -moz-linear-gradient(top, #c9de96 0%, #8ab66b 44%, #398235 100%); /* FF3.6+ */
		background: -webkit-gradient(linear, left top, left bottom, color-stop(0%,#c9de96), color-stop(44%,#8ab66b), color-stop(100%,#398235)); /* Chrome,Safari4+ */
		background: -webkit-linear-gradient(top, #c9de96 0%,#8ab66b 44%,#398235 100%); /* Chrome10+,Safari5.1+ */
		background: -o-linear-gradient(top, #c9de96 0%,#8ab66b 44%,#398235 100%); /* Opera 11.10+ */
		background: -ms-linear-gradient(top, #c9de96 0%,#8ab66b 44%,#398235 100%); /* IE10+ */
		background: linear-gradient(top, #c9de96 0%,#8ab66b 44%,#398235 100%); /* W3C */
		filter: progid:DXImageTransform.Microsoft.gradient( startColorstr='#c9de96', endColorstr='#398235',GradientType=0 ); /* IE6-9 */
		box-shadow: 2px 2px 2px black;
	}

	#replaceContent {
		margin-left: 320px;
		width: 900px;
	}

	.menu,
	#replaceContent pre {
		margin: 10px;
		padding: 10px;
		background-color: #f0f0f0;
		border-radius: 5px;
		border: 1px solid #c0c0c0;
	}

	#replaceContent ul {
		margin: 10px;
		padding: 10px;
		padding-left: 20px;
	}

	#replaceContent p {
		margin: 10px;
		padding: 10px;
	}

	#replaceContent h3 {
		margin: 20px;
		padding: 10px;
	}

	#replaceContent h2 {
		margin: 10px;
		padding: 10px;
		border-bottom: 1px solid #c0c0c0;
	}

	#replaceContent h4 {
		margin: 10px;
		padding: 10px;
		padding-left: 20px;
	}

	h2 a,
	h3 a {
		float: right;
	}

	.menu {
		width: 260px;
		position: fixed;
		left: 20px;
		top: 200px;
	}

	.menu ul {
		list-style-type: none;
	}

	.menu li {
		padding: 3px;
	}

	.menu li.H3 {
		padding-left: 20px;
	}

	.menu hr {
		margin: 10px;
	}

	.footer {
		width: 900px;
		margin-left: auto;
		margin-right: auto;
		display: block;
		clear:left;
		background-image: url(img/hr.jpg);
		background-repeat: repeat-x;
		padding-top: 30px;
		padding-bottom: 50px;
		text-shadow:  0 1px 0 white;
		text-align: center;
	}

	.footer p {
		margin-bottom: 20px;
	}

</style>
<link href="http://fonts.googleapis.com/css?family=Great+Vibes|Belleza" rel="stylesheet" type="text/css" />
</head>
<body>

	<section id="olives">

		<div class="header" id="top">
			<h1>Olives.js</h1>

			<p>
				Create real-time HTML5 applications, in no time!
				<a href="release/Olives-1.4.1.tgz">
					Download <span id="version">1.4.1</span>
				</a>
			</p>
		</div>

		<div class="menu"><ul><li><a href="release/Olives-1.4.1.tgz">Download Olives</a></li><li class="H2"><a href="#whatisolives">What is Olives?</a></li>
<li class="H2"><a href="#howdoiinstallit">How do I install it?</a></li>
<li class="H2"><a href="#integrationtests">Integration tests:</a></li>
<li class="H3"><a href="#oobject">OObject</a></li>
<li class="H3"><a href="#plugins">Plugins</a></li>
<li class="H3"><a href="#eventplugin">Event.plugin</a></li>
<li class="H3"><a href="#bindplugin">Bind.plugin</a></li>
<li class="H3"><a href="#domutils">DomUtils</a></li>
<li class="H3"><a href="#placeplugin">Place.plugin</a></li>
<li class="H3"><a href="#localstore">LocalStore</a></li>
<li class="H3"><a href="#socketiotransport">SocketIOTransport</a></li>
<li class="H2"><a href="#liveexamples">Live examples</a></li>
<li class="H2"><a href="#changelog">Changelog</a></li>
</ul>
<ul>
 			<li><a href="tests.html" target="_blank">Test your browser</a></li>
 			<li><a href="docs/latest/index.html" target="_blank">JsDoc</a></li>
 			<li><a href="http://todomvc.com/labs/architecture-examples/olives/" target="_blank">TodoMVC</a></li>
 		 </ul>
</div>

		<div class="article" id="replaceContent"><h2 id="whatisolives">What is Olives?<a href="#top">top</a></h2>

<ul>
<li>Olives is a JS MV* framework that helps you create scalable and realtime UIs.</li>
<li>It offers a powerful virtualised and double way data binding tool</li>
<li>It has an open API for adding custom features via plugins</li>
<li>It declaratively attaches behaviour to an HTML template</li>
<li>It's based on <a href="https://github.com/flams/emily">Emily</a> and socket.io to facilitate the communicaton with server side services on node.js</li>
</ul>

<p>Olives is part of <a href="http://todomvc.com">TodoMVC.com</a></p>

<p>Example of a simplified todo list:</p>

<pre><code class="html">&lt;div class="widget"&gt;

    &lt;div&gt;
        &lt;!-- Typing something in the input field will trigger the addTask function --&gt;
        &lt;input type="text" placeholder="What's to be done?" data-event="listen: keydown, addTask"&gt;
    &lt;/div&gt;

    &lt;div&gt;
        &lt;table&gt;
            &lt;thead&gt;
                &lt;tr&gt;
                    &lt;th&gt;#&lt;/td&gt;
                    &lt;th&gt;Task&lt;/th&gt;
                    &lt;th&gt;Action&lt;/th&gt;
                &lt;/tr&gt;
            &lt;/thead&gt;

            &lt;!-- The data binding plugin will repeat the following template--&gt;
            &lt;tbody data-bind="foreach"&gt;
                &lt;tr&gt;
                    &lt;!-- The getId function will be called on this td --&gt;
                    &lt;td data-bind="bind: getId"&gt;id&lt;/td&gt;

                    &lt;!-- The innerHTML of this td will be replaced by the value contained in the model
                        We will also add a custom plugin that will change the background of this DOM element --&gt;
                    &lt;td data-bind="bind: innerHTML" data-custom="color: lightblue"&gt;Name&lt;/td&gt;

                    &lt;!-- Clicking on this will trigger the removeTask function --&gt;
                    &lt;td&gt;&lt;a href="#" data-event="listen: click, removeTask"&gt;&lt;i class="icon-remove"&gt;&lt;/i&gt;&lt;/a&gt;&lt;/td&gt;
                &lt;/tr&gt;
            &lt;/tbody&gt;
        &lt;/table&gt;
    &lt;/div&gt;

&lt;/div&gt;
</code></pre>

<pre><code class="js">// OObject is a container for DOM elements
var widget = new OObject();

// List will be our model, it's an array of values
var list = new Store( [] );

// We tell the event plugin where to find the methods to call when en event is triggered
var event = new Event({

    // Add task will add a task in the model
    addTask: function ( event, node ) {
        if ( event.keyCode == 13 ) {
            list.alter( 'push', node.value );
            node.value = '';
        }
    },

    // Remove task will remove it
    removeTask: function ( event, node ) {
        list.del( node.getAttribute('data-bind_id') );
    }
});

// The data binding plugin needs to know where to find the data
var bind = new Bind(list, {

    // Get id can be an extra formatter
    getId: function ( item ) {
        this.innerHTML = list.alter( 'indexOf', item);
    }
});

// I'm adding the plugins to the widget
widget.plugins.addAll({

    // The event plugin will be reachable via data-event attributes
    'event': event,

    // The bind plugin will be reachable via data-bind attributes
    'bind': bind,

    // This is a custom plugin to show how simple it is to extend Olives!
    'custom': {
        color: function ( node, color ) {
            node.style.backgroundColor = color;
        }
    }
});

// Apply the behaviour to the DOM element selected via CSS selector
widget.alive( '.widget' );
</code></pre>

<h2 id="howdoiinstallit">How do I install it?<a href="#top">top</a></h2>

<p>Olives requires an AMD/commonJS compatible loader. I use requirejs: http://requirejs.org/</p>

<pre><code class="html">    &lt;script src="./require.js"&gt;&lt;/script&gt;
    &lt;script src="./Emily.js"&gt;&lt;/script&gt;
    &lt;script src="./Olives.js"&gt;&lt;/script&gt;
</code></pre>

<pre><code class="js">require(["Module"], function (Module) {
    // Do what you want with Module
});
</code></pre>

<p>If your application is based on node and you want the realtime part of Olives, on the server side, do:</p>

<pre><code class="bash">npm install requirejs
npm install olives
</code></pre>

<pre><code class="js">var olives = require("olives");

// Register your instance of socket.io
olives.registerSocketIO(io);
</code></pre>

<h2 id="integrationtests">Integration tests:<a href="#top">top</a></h2>

<h3 id="oobject">OObject<a href="#top">top</a></h3>

<pre><code class="js">describe("OObject is a container for DOM elements and a starting point for adding it behaviour", function () {

    it("can accept DOM elements from an HTML template", function () {
        var oobject = new OObject();

        oobject.template = "&lt;div&gt;&lt;/div&gt;";

        expect(oobject.dom).toBe(null);

        // Render will take what's in template and turn it into
        // DOM elements
        oobject.render();

        // These DOM elements will be accessible via the .dom property
        expect(oobject.dom).toBeInstanceOf(HTMLElement);
        expect(oobject.dom.nodeName).toBe("DIV");
    });

    it("can accept actual DOM elements", function () {
        var oobject = new OObject(),
            div = document.createElement("div");

        oobject.template = div;

        oobject.render();

        expect(oobject.dom).toBe(div);
    });

    it("can be rerendered with a new template", function () {
        var oobject = new OObject(),
            div = document.createElement("div");

        oobject.template = div;

        oobject.render();

        oobject.template = "&lt;p&gt;";

        oobject.render();

        expect(oobject.dom.nodeName).toBe("P");

    });

    it("can be placed somewhere in the dom", function () {
        var oobject = new OObject(),
            parent = document.createElement("div"),
            child = document.createElement("p");

        oobject.template = child;

        oobject.render();

        oobject.place(parent);

        expect(parent.childNodes[0]).toBe(child);
    });

    it("can be moved around", function () {
        var oobject = new OObject(),
            parent1 = document.createElement("div"),
            parent2 = document.createElement("div"),
            parent3 = document.createElement("div"),
            child = document.createElement("p");

        oobject.template = child;

        oobject.render();

        oobject.place(parent1);
        expect(parent1.childNodes[0]).toBe(child);

        oobject.place(parent2);
        expect(parent1.childNodes.length).toBe(0);
        expect(parent2.childNodes[0]).toBe(child);
    });

    it("can be placed before an existing dom node", function () {
        var oobject = new OObject(),
            parent = document.createElement("div"),
            sibling = document.createElement("div"),
            child = document.createElement("p");

        parent.appendChild(sibling);

        oobject.template = child;

        oobject.render();

        oobject.place(parent, sibling);

        expect(parent.childNodes[0]).toBe(child);
        expect(parent.childNodes[1]).toBe(sibling);
    });

    it("calls render prior to place if the UI has never been rendered", function () {
        var oobject = new OObject,
            parent = document.createElement("div"),
            child = document.createElement("p");

        oobject.template = child;

        oobject.place(parent);

        expect(oobject.dom).toBe(child);
    });

    it("should throw an error if trying to render or place an oobject without specifying a template", function () {
        var oobject = new OObject;

        expect(function () {
            oobject.render();
        }).toThrow();
    });

    it("add behaviour to the template via plugins", function () {
        var oobject = new OObject();

        oobject.template = '&lt;p data-i18n="translate: hello"&gt;&lt;/p&gt;';
        oobject.plugins.add('i18n', {
            translate: function (dom, text) {
                if (text == "hello") {
                    dom.innerHTML = "bonjour";
                }
            }
        });

        oobject.render();

        expect(oobject.dom.innerHTML).toBe("bonjour");
    });

    it("can create and render an OObject from existing DOM elements", function () {
        var oobject = new OObject(),
            dom = '&lt;p data-i18n="translate: hello"&gt;&lt;/p&gt;',
            parent = document.createElement("div");

        parent.innerHTML = dom;
        oobject.plugins.add('i18n', {
            translate: function (dom, text) {
                if (text == "hello") {
                    dom.innerHTML = "bonjour";
                }
            }
        });

        oobject.alive(parent);

        expect(oobject.dom.querySelector("p").innerHTML).toBe("bonjour");
    });

    it("can return the current place", function () {
        var oobject = new OObject(),
            parent = document.createElement("div"),
            child = document.createElement("p");

        oobject.template = child;

        oobject.place(parent);

        expect(oobject.getCurrentPlace()).toBe(parent);
    });

});
</code></pre>

<h3 id="plugins">Plugins<a href="#top">top</a></h3>

<pre><code class="js">describe("plugins can add behaviour to your HTML", function () {

    it("has a function for attaching behaviour to the template", function () {
        var plugins = new Plugins(),
            dom = document.createElement("div"),
            template = '&lt;p data-i18n="translate: hello"&gt;&lt;/p&gt;',
            translationMap = {};

        translationMap["hello"] = "bonjour";

        dom.innerHTML = template;

        plugins.add("i18n", {
            translate: function (dom, key) {
                dom.innerHTML = translationMap[key];
            }
        });

        plugins.apply(dom);

        expect(dom.querySelector("p").innerHTML).toBe("bonjour");
    });

    it("can apply multiple plugins", function () {
        var plugins = new Plugins(),
            dom = document.createElement("div"),
            template = ('&lt;p data-i18n="translate: hello"&gt; &lt;/p&gt; ' +
                '&lt;button data-action="listen: click, onClick"&gt;Click me&lt;/button&gt;'),
            translationMap = {},
            actions = {},
            called = false;

        translationMap["hello"] = "bonjour",
        actions.onClick = function () {
            called = true;
        };

        dom.innerHTML = template;

        plugins.addAll({
            "i18n": {
                translate: function (dom, key) {
                    dom.innerHTML = translationMap[key];
                }
            },
            "action": {
                listen: function (dom, event, method) {
                    dom.addEventListener(event, actions[method], false);
                }
            }
        });

        plugins.apply(dom);

        expect(dom.querySelector("p").innerHTML).toBe("bonjour");

        dom.querySelector("button").dispatchEvent(CreateMouseEvent("click"));

        expect(called).toBe(true);

    });

    it("can be initialised with a set of plugins", function () {
        var plugin = {},
            plugins = new Plugins({plugin: plugin});

        expect(plugins.get("plugin")).toBe(plugin);
    });

    it("can pass as many arguments to a plugins method as required, and a plugin can have several method", function () {
        var length1,
            length2,
            length3,
            plugin = {
                method1: function (dom, arg1, arg2, arg3) {
                    length1 = arguments.length;
                },
                method2: function (dom, arg1, arg2, arg3, arg4) {
                    length2 = arguments.length;
                },
                method3: function (dom, arg1, arg2) {
                    length3 = arguments.length;
                }
            },
            plugins = new Plugins({plugin: plugin}),
            dom = document.createElement("div"),
            template = '&lt;p data-plugin="method1: arg1, arg2, arg3; method2: arg1, arg2, arg3, arg4; method3: arg1, arg2"&gt;&lt;/p&gt;';

        dom.innerHTML = template;

        plugins.apply(dom);

        expect(length1).toBe(4);
        expect(length2).toBe(5);
        expect(length3).toBe(3);
    });

});
</code></pre>

<h3 id="eventplugin">Event.plugin<a href="#top">top</a></h3>

<pre><code class="js">describe("Event plugin can bind event listeners to the DOM", function () {

    it("has a method for adding an event listener to a dom element", function () {
        var oobject = new OObject(),
            // The event plugin must be given an object
            // so it knows where to find the methods to call
            eventPlugin = new EventPlugin(oobject),
            called = false,
            thisObject;

        // Here we tell the event plugin to listen for the click event
        // And that when it occurs, it should call onClick
        // The last parameter tells the phase we want to listen to (propagation == true, bubbling == false)
        oobject.template = '&lt;button data-event="listen: click, onClick, true"&gt;&lt;/button&gt;';

        // The function that will be called when the dom node is clicked
        oobject.onClick = function () {
            called = true;
            thisObject = this;
        };

        // Add the event plugin to the oobject
        oobject.plugins.add("event", eventPlugin);

        oobject.render();

        oobject.dom.dispatchEvent(CreateMouseEvent("click"));

        expect(called).toBe(true);
        expect(thisObject).toBe(oobject);

    });

    xit("can delegate an event for a set of DOM elements to the parent DOM", function () {
        var oobject = new OObject(),
            // The event plugin must be given an object
            // so it knows where to find the methods to call
            eventPlugin = new EventPlugin(oobject),
            clickedNode,
            clickEvent = CreateMouseEvent("click");

        // Here we tell the event plugin to listen for the click event
        // And that when it occurs, it should call onClick
        // The last parameter tells the phase we want to listen to (propagation == true, bubbling == false)
        oobject.template = '&lt;ul data-event="delegate: li, click, onClick, true"&gt;';
        oobject.template += '&lt;li&gt;Item 1&lt;/li&gt;';
        oobject.template += '&lt;li&gt;Item 2&lt;/li&gt;';
        oobject.template += '&lt;li&gt;Item 3&lt;/li&gt;';
        oobject.template += '&lt;li&gt;Item 4&lt;/li&gt;';
        oobject.template += '&lt;/ul&gt;';

        // The function that will be called when the dom node is clicked
        oobject.onClick = function (event, node) {
            clickedNode = node;
        };

        // Add the event plugin to the oobject
        oobject.plugins.add("event", eventPlugin);

        oobject.render();


        clickEvent.target = oobject.dom.querySelectorAll("li")[3];
        oobject.dom.dispatchEvent(clickEvent);

        expect(clickedNode.innerText).toBe("Item 4");
    });

});
</code></pre>

<h3 id="bindplugin">Bind.plugin<a href="#top">top</a></h3>

<pre><code class="js">describe("Bind plugin can bind an SVG/HTML template with a Store for two-way binding", function () {

    it("sets the property of a DOM element to the value set in the store, for a given key", function () {
        var oobject = new OObject(),
            store = new Store(),
            bindPlugin = new BindPlugin(store);

        oobject.template = '&lt;p data-bind="bind: innerText, name"&gt;&lt;/p&gt;';

        oobject.plugins.add("bind", bindPlugin);

        oobject.render();

        store.set("name", "Olives");

        expect(oobject.dom.innerText).toBe("Olives");

        store.set("name", "Emily");

        expect(oobject.dom.innerText).toBe("Emily");
    });

    it("can work with any dom property", function () {
        var oobject = new OObject(),
            store = new Store(),
            bindPlugin = new BindPlugin(store);

        oobject.template = '&lt;p data-bind="bind: className, level"&gt;&lt;/p&gt;';

        oobject.plugins.add("bind", bindPlugin);

        oobject.render();

        store.set("level", "info");

        expect(oobject.dom.className).toBe("info");

        store.set("level", "warning");

        expect(oobject.dom.className).toBe("warning");
    });

    it("can create a new template for each item in a store", function () {
        var oobject = new OObject(),
            store = new Store([]),
            bindPlugin = new BindPlugin(store);

        oobject.template = '&lt;ul data-bind="foreach"&gt;';
        oobject.template += '&lt;li data-bind="bind: innerText"&gt;&lt;/li&gt;';
        oobject.template += '&lt;/ul&gt;';

        oobject.plugins.add("bind", bindPlugin);

        oobject.render();

        store.alter("push", "Olives");

        expect(oobject.dom.childNodes.length).toBe(1);
        expect(oobject.dom.querySelectorAll("li")[0].innerText).toBe("Olives");

        store.alter("push", "Emily");

        expect(oobject.dom.childNodes.length).toBe(2);
        expect(oobject.dom.querySelectorAll("li")[1].innerText).toBe("Emily");

        store.alter("shift");

        expect(oobject.dom.childNodes.length).toBe(1);
        expect(oobject.dom.querySelectorAll("li")[0].innerText).toBe("Emily");
    });

    it("can create a new template for more complex items in a store, like an object", function () {
        var oobject = new OObject(),
            store = new Store([]),
            bindPlugin = new BindPlugin(store);


        oobject.template = '&lt;ul data-bind="foreach"&gt;';
        oobject.template +=     '&lt;li&gt;';
                                    // The className are only useful for querying the dom node for facilitating
                                    // the understanding of the test
        oobject.template +=         '&lt;span class="itemName" data-bind="bind: innerText, name"&gt;&lt;/span&gt;';
        oobject.template +=         '&lt;span class="itemType" data-bind="bind: innerText, type"&gt;&lt;/span&gt;';
        oobject.template +=     '&lt;/li&gt;';
        oobject.template += '&lt;/ul&gt;';

        oobject.plugins.add("bind", bindPlugin);

        oobject.render();

        store.alter("push", {
            name: "Olives",
            type: "MVC"
        });

        expect(oobject.dom.childNodes.length).toBe(1);
        expect(oobject.dom.querySelectorAll("li .itemName")[0].innerText).toBe("Olives");
        expect(oobject.dom.querySelectorAll("li .itemType")[0].innerText).toBe("MVC");

        store.alter("push", {
            name: "Emily",
            type: "Library"
        })

        expect(oobject.dom.childNodes.length).toBe(2);
        expect(oobject.dom.querySelectorAll("li .itemName")[1].innerText).toBe("Emily");
        expect(oobject.dom.querySelectorAll("li .itemType")[1].innerText).toBe("Library");

        store.alter("shift");

        expect(oobject.dom.childNodes.length).toBe(1);
        expect(oobject.dom.querySelectorAll("li .itemName")[0].innerText).toBe("Emily");

    });

    it("can tell the id of an item in the store", function () {
        var oobject = new OObject(),
            store = new Store([]),
            bindPlugin = new BindPlugin(store);

        oobject.template = '&lt;ul data-bind="foreach"&gt;';
        oobject.template += '&lt;li data-bind="bind: innerText, name"&gt;&lt;/li&gt;';
        oobject.template += '&lt;/ul&gt;';

        oobject.plugins.add("bind", bindPlugin);

        oobject.render();

        store.alter("push", {
            name: "Olives"
        });

        store.alter("push", {
            name: "Emily"
        });

        expect(bindPlugin.getItemIndex(oobject.dom.querySelectorAll("li")[0])).toBe(0);
        expect(bindPlugin.getItemIndex(oobject.dom.querySelectorAll("li")[1])).toBe(1);
    });

});
</code></pre>

<h3 id="domutils">DomUtils<a href="#top">top</a></h3>

<pre><code class="js">describe("DomUtils is a collection of tools for manipulating the dom", function () {

    it("has a function for getting an element's dataset even if the browser doesn't support the property", function () {

        var dom = document.createElement("div");

        dom.innerHTML = '&lt;p data-name="Olives"&gt;&lt;/p&gt;';

        dataset = DomUtils.getDataset(dom.querySelector("p"));

        expect(dataset.name).toBe("Olives");

    });

    it("has a function for setting the attribute of both an HTML and an SVG element", function () {
        var htmlElement = document.createElement("p"),
            svgElement = svgElement = document.createElementNS("http://www.w3.org/2000/svg", "ellipse");

        DomUtils.setAttribute(svgElement, "width", 100);

        expect(svgElement.getAttribute("width")).toBe('100');

        DomUtils.setAttribute(htmlElement, "innerText", "Olives");

        expect(htmlElement.innerText).toBe("Olives");
    });

    it("has a function for getting a DOM node and its siblings", function () {

        var parent = document.createElement("div"),
            sibling1 = document.createElement("p"),
            sibling2 = document.createElement("p"),
            sibling3 = document.createElement("p"),
            child1 = document.createElement("span"),
            child2 = document.createElement("span"),
            child3 = document.createElement("span");

        parent.appendChild(sibling1);
        parent.appendChild(sibling2);
        parent.appendChild(sibling3);

        sibling1.appendChild(child1);
        sibling2.appendChild(child2);
        sibling3.appendChild(child3);

        var list = toArray(DomUtils.getNodes(sibling2));

        expect(hasItem(list, sibling1)).toBe(true);
        expect(hasItem(list, sibling2)).toBe(true);
        expect(hasItem(list, sibling3)).toBe(true);
        expect(hasItem(list, child1)).toBe(true);
        expect(hasItem(list, child2)).toBe(true);
        expect(hasItem(list, child3)).toBe(true);

    });

    it("can restrict the returns DOM elements to a given CSS selector", function () {
        var parent = document.createElement("div"),
            sibling1 = document.createElement("p"),
            sibling2 = document.createElement("p"),
            sibling3 = document.createElement("p"),
            child1 = document.createElement("span"),
            child2 = document.createElement("span"),
            child3 = document.createElement("span");

        parent.appendChild(sibling1);
        parent.appendChild(sibling2);
        parent.appendChild(sibling3);

        sibling1.appendChild(child1);
        sibling2.appendChild(child2);
        sibling3.appendChild(child3);

        var list = toArray(DomUtils.getNodes(sibling2, "span"));

        expect(hasItem(list, sibling1)).toBe(false);
        expect(hasItem(list, sibling2)).toBe(false);
        expect(hasItem(list, sibling3)).toBe(false);
        expect(hasItem(list, child1)).toBe(true);
        expect(hasItem(list, child2)).toBe(true);
        expect(hasItem(list, child3)).toBe(true);
    });

    it("has a function for telling if an a child node matches a given CSS selector", function () {

        var parent = document.createElement("div"),
            child = document.createElement("p");

        parent.appendChild(child);

        expect(DomUtils.matches(parent, "p", child)).toBe(true);
        expect(DomUtils.matches(parent, "ul", child)).toBe(false);
        expect(DomUtils.matches(parent, "p.text", child)).toBe(false);

    });

});
</code></pre>

<h3 id="placeplugin">Place.plugin<a href="#top">top</a></h3>

<pre><code class="js">describe("Place.plugin places OObject in the DOM", function () {

    it("has a function for adding adding an oobject", function () {
        var parentUI = new OObject(),
            childUI = new OObject(),
            placePlugin = new PlacePlugin();

        childUI.template = '&lt;p&gt;&lt;/p&gt;';

        parentUI.template = '&lt;div data-place="place: myUI"&gt;&lt;/div&gt;';

        parentUI.plugins.add("place", placePlugin);

        placePlugin.set("myUI", childUI);

        parentUI.render();

        expect(parentUI.dom.childNodes[0]).toBe(childUI.dom);
    });

    it("has a function for adding multiple oobjects, equivalent to calling set multiple times", function () {
        var parentUI = new OObject(),
            childUI1 = new OObject(),
            childUI2 = new OObject(),
            placePlugin = new PlacePlugin();

        childUI1.template = '&lt;p&gt;&lt;/p&gt;';
        childUI2.template = '&lt;p&gt;&lt;/p&gt;';

        parentUI.template = '&lt;ul&gt;';
        parentUI.template += '&lt;li data-place="place: myUI1"&gt;&lt;/li&gt;';
        parentUI.template += '&lt;li data-place="place: myUI2"&gt;&lt;/li&gt;';
        parentUI.template += '&lt;/ul&gt;';

        parentUI.plugins.add("place", placePlugin);

        placePlugin.setAll({
            "myUI1": childUI1,
            "myUI2": childUI2
        });

        parentUI.render();

        expect(parentUI.dom.querySelectorAll("p")[0]).toBe(childUI1.dom);
        expect(parentUI.dom.querySelectorAll("p")[1]).toBe(childUI2.dom);
    });

});
</code></pre>

<h3 id="localstore">LocalStore<a href="#top">top</a></h3>

<pre><code class="js">describe("LocalStore is an Emily store which can be synchronized with localStorage", function () {

    it("can be initialised like an Emily Store", function () {
        var store = new LocalStore({
            name: "Olives",
            type: "MVC"
        });

        expect(store.get("type")).toBe("MVC");
    });

    it("can be synchronized with localStorage", function () {
        var store = new LocalStore({
            name: "Olives",
            type: "MVC"
        });

        // the store is now persisted in localStorage
        store.sync("OlivesStore");
    });

    it("can reload data from localStorage", function () {
        var store = new LocalStore();

        store.sync("OlivesStore");

        expect(store.get("name")).toBe("Olives");
    });

});
</code></pre>

<h3 id="socketiotransport">SocketIOTransport<a href="#top">top</a></h3>

<pre><code class="js">describe("SocketIOTransport wraps socket.io to issue requests and listen to Olives channels from a node.js server", function () {

    xit("[SERVER SIDE] has a function for adding an Olives handler", function () {
        var olives = require("olives");

        // socket is the socket created by socket.io, listening to the web server
        olives.registerSocketIO(socket);

        olives.handlers.set("myHandler", function (payload, onEnd, onData) {

            // payload comes from the client and holds data needed to issue the request
            // It can be of any type

            // Call onEnd when you want to send something to the client that will close the connection
            onEnd(data);

            // Call onData if it's a chunk and that more are coming, so the connection stays alive
            onData(data);

        });
    });

    xit("can issue a request to a handler on the server side", function () {
        var transport = new SocketIOTransport(fakeSocket);

        // The payload can be any type, or a JSON
        var payload = {};

        transport.request("myHandler", payload, function callback(data) {
            // Do what you want with data
        });
    });

    xit("can listen to a kept-alive socket", function () {
        var transport = new SocketIOTransport(fakeSocket);

        // The payload can be any type, or a JSON
        var payload = {};

        var stop = transport.listen("myHandler", payload, function callback(data) {
            // Do what you want with data
        });

        // Stop can be called whenever the listener is no more interested by the channel's updates
        stop();
    });

});
</code></pre>

<h2 id="liveexamples">Live examples<a href="#top">top</a></h2>

<ul>
<li><a href="http://flams.github.com/olives/todo/index.html">The todo application</a> Available on <a href="http://todomvc.com">TodoMVC</a></li>
<li><a href="http://www.taiaut.com/taiaut.com/index.php">Ideafy by Taiaut</a></li>
<li><a href="">Suggestions (Unavailable ATM)</a></li>
</ul>

<h2 id="changelog">Changelog<a href="#top">top</a></h2>

<h4 id="14024mar2013">1.4.0 - 24 MAR 2013</h4>

<ul>
<li>Added Bind.plugin.getItemIndex for getting the index of a foreach generated item in a store</li>
<li>Plugins constructor can be called with the list of plugins</li>
<li>Updated all documentations</li>
<li>SocketIOTransport doesn't initialise the socket anymore, the socket must be given</li>
</ul>

<h4 id="13215mar2013">1.3.2 - 15 MAR 2013</h4>

<ul>
<li>Incorporating 1.3.1 changes, tests + docs clean up</li>
<li>Updated Emily</li>
</ul>

<h4 id="13017dec2012">1.3.0 - 17 DEC 2012</h4>

<ul>
<li>Olives modules are now anonymous. When downloading Olives you can get its source file and decide by yourself how you want to use them/pack them into your application. A standalone file is still available for rapid prototyping.</li>
<li>Model-plugin is now called Bind.plugin</li>
<li>Transport is now called SocketIOTransport</li>
<li>UI-pugin is now called Place.plugin</li>
<li>Plugins are now name as "name.plugin.js" instead of "name-plugin.js"</li>
<li>Updated JSDocs</li>
</ul></div>

		<div class="footer">
				Olives is released under the <a href="https://github.com/flams/olives/blob/master/LICENSE">MIT license</a>.

				Copyright

				<a href="http://podefr.tumblr.com">Olivier Scherrer</a>

				&amp;

				<a href="http://owietrich.tumblr.com/">Olivier Wietrich</a>

				2012-2013
		</div>

<a href="http://github.com/flams/olives"> <img alt="Fork me on GitHub" src="https://s3.amazonaws.com/github/ribbons/forkme_right_white_ffffff.png" style="position: fixed; top: 0; right: 0; border: 0;" /> </a>
<script type="text/javascript">
    var elements = document.getElementsByTagName("pre");
    // loop old-style for IE8, even though Emily doesn't support it
    for (var i=0, nb=elements.length; i<nb; i++) {
        elements[i].className += "prettyprint";
    }
</script>
<script src="https://google-code-prettify.googlecode.com/svn/loader/run_prettify.js"></script>
<script type="text/javascript">

  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-30035429-1']);
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();

</script>
</section></body>
</html>
