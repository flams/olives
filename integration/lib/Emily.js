define("Observable",function(){function b(){var c={};this.watch=function(a,e,d){if(typeof a=="string"&&typeof e=="function"){var b=c[a]=c[a]||[];observer=[e,d];b.push(observer);return[a,b.indexOf(observer)]}else return false};this.unwatch=function(a){var e=a[0],a=a[1];return c[e]&&c[e][a]?(c[e][a]=null,true):false};this.notify=function(a,e){var d=c[a],b;if(d){for(b=d.length;b--;)d[b]&&d[b][0].call(d[b][1]||null,e);return true}else return false};this.hasObserver=function(a){return!(!a||!c[a[0]]||!c[a[0]][a[1]])}}
return{create:function(){return new b}}});
define("TinyStore",["Observable","Tools"],function(b,c){function a(a){var d={},g=c,f=b.create();g.mixin(a,d);this.getNbItems=function(){return g.count(d)};this.get=function(a){return d[a]};this.has=function(a){return d.hasOwnProperty(a)};this.set=function(a,c){var b;return typeof a=="string"?(b=d[a],d[a]=c,f.notify(a,c,b),true):false};this.del=function(a){return this.has(a)?(delete d[a],f.notify(a,d[a]),true):false};this.watch=function(a,c,b){return f.watch(a,c,b)};this.unwatch=function(a){return f.unwatch(a)}}
return{create:function(c){return new a(c)}}});define("Tools",function(){return{getGlobal:function(){return function(){return this}.call(null)},mixin:function(b,c,a){for(var e in b)if(b.hasOwnProperty(e)&&(!c[e]||!a))c[e]=b[e]},count:function(b){var c=0,a;for(a in b)b.hasOwnProperty(a)&&c++;return c},compareObjects:function(b,c){return Object.getOwnPropertyNames(b).sort().join("")==Object.getOwnPropertyNames(c).sort().join("")},toArray:function(b){return Array.prototype.slice.call(b)}}});
define("Transport",function(){function b(){var c,a=io;this.connect=function(b){c=a.connect(b);return this};this.getSocket=function(){return c};this.on=function(a,b){c.on(a,b)};this.emit=function(a,b){c.emit(a,b)}}return{create:function(c){return(new b(c)).connect(c)}}});
